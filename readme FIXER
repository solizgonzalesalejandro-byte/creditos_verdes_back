Informe: Restricci√≥n por Saldo Negativo para Fixers
Este informe detalla c√≥mo el sistema implementa la restricci√≥n para que un Fixer no pueda aceptar nuevos trabajos ni publicar ofertas cuando su saldo de billetera sea negativo. El documento explica el c√≥digo, demuestra cumplimiento de los criterios de aceptaci√≥n y sirve como gu√≠a de funcionamiento y pruebas.
Origen del C√≥digo y Artefacto Referenciado
Se utiliza como base el artefacto HTML/JS proporcionado por el solicitante (panel de Fixer con l√≥gica de restricci√≥n).
Resumen Ejecutivo
Resumen corto:
- El sistema detecta saldo negativo y marca al fixer como 'restringido'.
- Mientras el estado sea restringido: los botones 'Aceptar Trabajo', 'Publicar Oferta' y 'Crear Borrador' est√°n deshabilitados; se muestra alerta en UI; se registra log y se persiste el estado en localStorage.
- Al regularizar saldo (pago de comisiones), el sistema elimina la restricci√≥n autom√°ticamente y registra el cambio en logs.

Arquitectura y Componentes Relevantes
Componentes principales:
- UI (HTML/CSS): panel con balance, botones de acci√≥n, secci√≥n de borradores, logs y lista de criterios.
- L√≥gica (JavaScript): estado global (initialState, state), funciones loadState/saveState, updateUI, reglas de verificaci√≥n (acceptanceCriteria) y persistencia en localStorage.
- Persistencia m√≠nima: localStorage (simulaci√≥n). En un sistema real, reemplazar por base de datos relacional o NoSQL y endpoints API.




Fragmentos de C√≥digo Clave (extra√≠dos del archivo)
A continuaci√≥n se incluyen los fragmentos m√°s relevantes para entender la implementaci√≥n. Estos fragmentos provienen del archivo proporcionado (fixer 2.html).

1) Estado inicial y estructura de control (initialState):
const initialState = {
    balance: -450,
    commission: 450,
    isRestricted: true,
    restrictionReason: "Saldo negativo",
    restrictionDate: new Date().toISOString(),
    sessionId: generateSessionId(),
    logs: [
        { timestamp: new Date().toISOString(), message: "Sistema inicializado con saldo negativo - Restricciones aplicadas" }
    ],
    drafts: [],
    criteriaStatus: {},
    fixerStatus: "restringido",
    lastRestrictionDate: new Date().toISOString(),
    mobileView: false
};

2) Regla principal que determina la restricci√≥n y actualizaci√≥n UI (resumen):
function updateUI() {
    // Actualizar estado basado en el saldo
    state.isRestricted = state.balance < 0;
    state.fixerStatus = state.isRestricted ? "restringido" : "activo";
    ...
    if (state.isRestricted) {
        // mostrar alerta, deshabilitar botones y registrar restricci√≥n si corresponde
        acceptJobBtn.disabled = true;
        postOfferBtn.disabled = true;
        createDraftBtn.disabled = true;
        if (!state.restrictionDate) {
            state.restrictionDate = new Date().toISOString();
            state.lastRestrictionDate = new Date().toISOString();
            addLog("Sistema: Restricci√≥n aplicada por saldo negativo");
        }
    } else {
        // habilitar botones y eliminar restricci√≥n
        acceptJobBtn.disabled = false;
        postOfferBtn.disabled = false;
        createDraftBtn.disabled = false;
        if (state.restrictionDate) {
            addLog("Sistema: Restricciones eliminadas - cuenta regularizada");
            state.restrictionDate = null;
        }
    }
    ...
}

3) Persistencia (localStorage) y logs:
function saveState() {
    localStorage.setItem('fixerPanelData', JSON.stringify(state));
}
function loadState() {
    const savedData = localStorage.getItem('fixerPanelData');
    if (savedData) {
        const savedState = JSON.parse(savedData);
        state = { ...state, ...savedState };
        addLog("Sistema: Estado cargado desde almacenamiento persistente");
    } else {
        saveState();
    }
}

4) Matriz de criterios de aceptaci√≥n (aceptanceCriteria): contiene 25 criterios con tests y demostraciones autom√°ticas.
// Estado inicial y configuraci√≥n
        const initialState = {
            balance: -450,
            commission: 450,
            isRestricted: true,
            restrictionReason: "Saldo negativo",
            restrictionDate: new Date().toISOString(),
            sessionId: generateSessionId(),
            logs: [
                { timestamp: new Date().toISOString(), message: "Sistema inicializado con saldo negativo - Restricciones aplicadas" }
            ],
            drafts: [],
            criteriaStatus: {},
            fixerStatus: "restringido",
            lastRestrictionDate: new Date().toISOString(),
            mobileView: false
        };

        // Criterios de aceptaci√≥n completos (25 criterios)
        const acceptanceCriteria = [
            {
                id: "CA-001",
                description: "El sistema detecta autom√°ticamente cuando el saldo de la billetera del fixer sea negativo",
                test: () => state.balance < 0,
                demonstrate: () => showNotification(`‚úÖ Sistema detect√≥ saldo negativo: $${state.balance.toFixed(2)}`, 'info')
            },
            {
                id: "CA-002", 
                description: "El sist
// (fragmento reducido por brevity)

Demostraci√≥n de Cumplimiento por Criterio
A continuaci√≥n se describe c√≥mo se verifica cada criterio (resumen) y la evidencia en el c√≥digo/UI para demostrar cumplimiento.
CA-001 - Detecta autom√°ticamente saldo negativo
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: state.isRestricted = state.balance < 0; actualizado en updateUI().
- UI: badge de estado y balance muestran clase 'balance-negative' y texto 'Restringido'.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-002 - Impedir aceptar trabajos cuando saldo negativo
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: botones acceptJobBtn y postOfferBtn se ponen disabled cuando state.isRestricted es true.
- Prueba: bot√≥n 'Simular Oferta' y 'Simular Env√≠o' registran logs de bloqueo si est√° restringido.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-003 - Bloquear publicaci√≥n de ofertas cuando saldo negativo
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: postOfferBtn y createDraftBtn deshabilitados y bloqueados en updateUI().
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-004 - Mostrar mensaje claro informando restricci√≥n
Evidencia t√©cnica y c√≥mo se demuestra:
- UI: elemento #restrictionAlert visible con mensaje que incluye motivo y acciones necesarias.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-005 - Mensaje indica motivo y acciones necesarias
Evidencia t√©cnica y c√≥mo se demuestra:
- UI: elemento #restrictionAlert visible con mensaje que incluye motivo y acciones necesarias.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-006 - Bot√≥n 'Aceptar trabajo' deshabilitado cuando saldo negativo
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: botones acceptJobBtn y postOfferBtn se ponen disabled cuando state.isRestricted es true.
- Prueba: bot√≥n 'Simular Oferta' y 'Simular Env√≠o' registran logs de bloqueo si est√° restringido.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-007 - Bot√≥n 'Publicar oferta' no disponible o aviso
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: postOfferBtn y createDraftBtn deshabilitados y bloqueados en updateUI().
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-008 - Registrar en DB la causa de la restricci√≥n (simulado en logs/state)
Evidencia t√©cnica y c√≥mo se demuestra:
- Persistencia y logging: state.restrictionDate, lastRestrictionDate y addLog(...) registran causas y timestamps.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-009 - No permitir evadir la restricci√≥n actualizando perfil/sesi√≥n
Evidencia t√©cnica y c√≥mo se demuestra:
- Persistencia: loadState/saveState usan localStorage; reiniciar sesi√≥n o recargar mantiene estado restringido.
- Contra-evasi√≥n: acciones de 'Actualizar Perfil' no alteran balance ni isRestricted.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-010 - Al regularizar saldo se eliminan restricciones autom√°ticamente
Evidencia t√©cnica y c√≥mo se demuestra:
- Flujo de normalizaci√≥n: al pagar comisiones (bot√≥n 'Pagar Comisiones') se ajusta state.balance y state.commission y updateUI() libera restricciones; UI y logs se actualizan en tiempo real.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-011 - Saldo actualizado reflejado en tiempo real en la interfaz
Evidencia t√©cnica y c√≥mo se demuestra:
- Flujo de normalizaci√≥n: al pagar comisiones (bot√≥n 'Pagar Comisiones') se ajusta state.balance y state.commission y updateUI() libera restricciones; UI y logs se actualizan en tiempo real.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-012 - Registrar log del cambio de estado (restringida->activa)
Evidencia t√©cnica y c√≥mo se demuestra:
- Persistencia y logging: state.restrictionDate, lastRestrictionDate y addLog(...) registran causas y timestamps.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-013 - No permitir crear ofertas en borrador mientras saldo negativo
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: postOfferBtn y createDraftBtn deshabilitados y bloqueados en updateUI().
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-014 - Notificar al fixer por correo o alerta interna (simulado via logs/alert)
Evidencia t√©cnica y c√≥mo se demuestra:
- Notificaci√≥n: el sistema simula notificaciones y registra mensajes en logs; en producci√≥n a√±adir endpoint de correo/notifications.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-015 - No permitir aceptar trabajos enviados por otros durante restricci√≥n
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: botones acceptJobBtn y postOfferBtn se ponen disabled cuando state.isRestricted es true.
- Prueba: bot√≥n 'Simular Oferta' y 'Simular Env√≠o' registran logs de bloqueo si est√° restringido.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-016 - Restricci√≥n no afecta funciones no relacionadas (perfil, ver borradores)
Evidencia t√©cnica y c√≥mo se demuestra:
- UI: botones de perfil y ver borradores permanecen habilitados. C√≥digo habilita solo la parte de publicaci√≥n/aceptaci√≥n.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-017 - Persistencia de restricci√≥n tras logout/recarga (localStorage)
Evidencia t√©cnica y c√≥mo se demuestra:
- Persistencia: loadState/saveState usan localStorage; reiniciar sesi√≥n o recargar mantiene estado restringido.
- Contra-evasi√≥n: acciones de 'Actualizar Perfil' no alteran balance ni isRestricted.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-018 - Mostrar correctamente saldo negativo en billetera
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: state.isRestricted = state.balance < 0; actualizado en updateUI().
- UI: badge de estado y balance muestran clase 'balance-negative' y texto 'Restringido'.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-019 - Validaci√≥n se aplica en web y m√≥vil (simulado vista m√≥vil)
Evidencia t√©cnica y c√≥mo se demuestra:
- Implementado mediante las variables de estado y condicionales en updateUI() y control de eventos en los handlers de los botones.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-020 - Permitir aceptar/publicar al tener saldo positivo
Evidencia t√©cnica y c√≥mo se demuestra:
- Flujo de normalizaci√≥n: al pagar comisiones (bot√≥n 'Pagar Comisiones') se ajusta state.balance y state.commission y updateUI() libera restricciones; UI y logs se actualizan en tiempo real.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-021 - Actualizar estado del fixer a 'restringido' al detectar saldo negativo
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: state.isRestricted = state.balance < 0; actualizado en updateUI().
- UI: badge de estado y balance muestran clase 'balance-negative' y texto 'Restringido'.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-022 - Mantener restricci√≥n tras recargar/actualizar la p√°gina
Evidencia t√©cnica y c√≥mo se demuestra:
- Persistencia: loadState/saveState usan localStorage; reiniciar sesi√≥n o recargar mantiene estado restringido.
- Contra-evasi√≥n: acciones de 'Actualizar Perfil' no alteran balance ni isRestricted.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-023 - Registrar fecha y hora de aplicaci√≥n de restricci√≥n
Evidencia t√©cnica y c√≥mo se demuestra:
- Persistencia y logging: state.restrictionDate, lastRestrictionDate y addLog(...) registran causas y timestamps.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-024 - No permitir enviar solicitudes de trabajo mientras restringido
Evidencia t√©cnica y c√≥mo se demuestra:
- L√≥gica: botones acceptJobBtn y postOfferBtn se ponen disabled cuando state.isRestricted es true.
- Prueba: bot√≥n 'Simular Oferta' y 'Simular Env√≠o' registran logs de bloqueo si est√° restringido.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
CA-025 - Mostrar motivo en secci√≥n de billetera
Evidencia t√©cnica y c√≥mo se demuestra:
- UI: elemento #restrictionAlert visible con mensaje que incluye motivo y acciones necesarias.
Prueba sugerida (manual):
- Paso 1: Abrir panel; verificar saldo negativo mostrado y botones deshabilitados.
- Paso 2: Intentar 'Simular Oferta' y verificar log y notificaci√≥n de bloqueo.
- Paso 3: Pulsar 'Pagar Comisiones' y verificar que los botones se habiliten y log registre la eliminaci√≥n de la restricci√≥n.
----
Pruebas Automatizadas y Casos de Prueba
Se sugieren casos de prueba automatizados (pueden implementarse con Cypress, Selenium o Jest+Puppeteer):
- TC-01: Carga con saldo negativo -> verificar isRestricted=true, botones deshabilitados, alerta visible y registro de restricci√≥n con timestamp.
- TC-02: Pago de comisiones -> verificar balance >=0, isRestricted=false, botones habilitados, log de 'Restricciones eliminadas'.
- TC-03: Persistencia tras recarga -> set localStorage con estado restringido y recargar, verificar que sigue restringido.
- TC-04: Intento de evasi√≥n -> simular actualizaci√≥n de perfil y verificar que isRestricted no cambia.

Mapeo a Base de Datos y Recomendaciones (producci√≥n)
En el prototipo se usa localStorage. En producci√≥n se recomienda:
- Tabla 'fixers' con campos: id, balance (decimal), commission_due (decimal), status ENUM('activo','restringido'), restriction_reason, restriction_applied_at (datetime), restriction_cleared_at (datetime), last_updated_at.
- Tabla 'logs' o 'account_events' para registrar eventos (timestamp, fixer_id, event_type, details).
- API endpoints: GET /fixers/{id}/wallet, POST /fixers/{id}/pay_commissions, GET /fixers/{id}/events.
- Middleware en backend que valide balance antes de operaciones cr√≠ticas (aceptar trabajo, publicar oferta, crear borrador) y retorne 403 con mensaje cuando est√© restringido.

Consideraciones de Seguridad y Evitaci√≥n de Evasi√≥n
- No confiar solo en validaci√≥n del frontend. Implementar validaci√≥n en backend y en la base de datos.
- Registrar cada intento bloqueado con usuario, IP y timestamp para auditor√≠a.
- Asegurar que los endpoints cr√≠ticos revisen el campo 'status' del fixer y rechacen operaciones si status='restringido'.

C√≥mo usar esta gu√≠a para pruebas y despliegue
- Instrucciones r√°pidas para QA: abrir la UI (archivo local), usar el selector 'Simular estado' o 'Pagar Comisiones' y ejecutar los TC listados.
- Para integraci√≥n: trasladar la l√≥gica de state.isRestricted al servidor, exponer endpoints y notificar por email/alert interna cuando se aplique la restricci√≥n.

Anexos: C√≥digo JS completo (extracto del script)
Se agrega a continuaci√≥n un extracto m√°s amplio del script para referencia y pruebas. (Fragmento extra√≠do del archivo proporcionado).
// Estado inicial y configuraci√≥n
        const initialState = {
            balance: -450,
            commission: 450,
            isRestricted: true,
            restrictionReason: "Saldo negativo",
            restrictionDate: new Date().toISOString(),
            sessionId: generateSessionId(),
            logs: [
                { timestamp: new Date().toISOString(), message: "Sistema inicializado con saldo negativo - Restricciones aplicadas" }
            ],
            drafts: [],
            criteriaStatus: {},
            fixerStatus: "restringido",
            lastRestrictionDate: new Date().toISOString(),
            mobileView: false
        };

        // Criterios de aceptaci√≥n completos (25 criterios)
        const acceptanceCriteria = [
            {
                id: "CA-001",
                description: "El sistema detecta autom√°ticamente cuando el saldo de la billetera del fixer sea negativo",
                test: () => state.balance < 0,
                demonstrate: () => showNotification(`‚úÖ Sistema detect√≥ saldo negativo: $${state.balance.toFixed(2)}`, 'info')
            },
            {
                id: "CA-002", 
                description: "El sistema impide al fixer aceptar nuevos trabajos mientras tenga saldo negativo",
                test: () => state.isRestricted && document.getElementById('acceptJobBtn').disabled,
                demonstrate: () => showNotification(state.isRestricted ? 
                    '‚ùå Aceptar trabajos BLOQUEADO por saldo negativo' : 
                    '‚úÖ Aceptar trabajos PERMITIDO', state.isRestricted ? 'error' : 'success')
            },
            {
                id: "CA-003",
                description: "El sistema bloqueea la opci√≥n de publicar nuevas ofertas con saldo negativo",
                test: () => state.isRestricted && document.getElementById('postOfferBtn').disabled,
                demonstrate: () => showNotification(state.isRestricted ? 
                    '‚ùå Publicar ofertas BLOQUEADO por saldo negativo' : 
                    '‚úÖ Publicar ofertas PERMITIDO', state.isRestricted ? 'error' : 'success')
            },
            {
                id: "CA-004",
                description: "Se muestre un mensaje claro informando que el saldo negativo impide realizar acciones",
                test: () => state.isRestricted && !document.getElementById('restrictionAlert').classList.contains('hidden'),
                demonstrate: () => showNotification('üì¢ Mostrando mensaje de restricci√≥n al usuario', 'info')
            },
            {
                id: "CA-005",
                description: "El mensaje de advertencia indique el motivo y las acciones necesarias para resolverlo",
                test: () => {
                    const alert = document.getElementById('restrictionAlert');
                    return alert.textContent.includes('saldo negativo') && 
                           alert.textContent.includes('liquidar las comisiones') &&
                           alert.textContent.includes('aceptar nuevos trabajos');
                },
                demonstrate: () => showNotification('üìù Mensaje muestra motivo y soluci√≥n: "Saldo negativo - Liquidar comisiones"', 'info')
            },
            {
                id: "CA-006",
                description: "El bot√≥n 'Aceptar trabajo' est√© deshabilitado cuando el saldo sea negativo",
                test: () => state.isRestricted && document.getElementById('acceptJobBtn').disabled,
                demonstrate: () => showNotification(state.isRestricted ? 
                    'üîí Bot√≥n "Aceptar trabajo" DESHABILITADO' : 
                    'üîì Bot√≥n "Aceptar trabajo" HABILITADO', state.isRestricted ? 'error' : 'success')
            },
            {
                id: "CA-007", 
                description: "El bot√≥n 'Publicar oferta' no est√© disponible o muestre un aviso de restricci√≥n",
                test: () => state.isRestricted && document.getElementById('postOfferBtn').disabled,
Conclusi√≥n
El prototipo implementa y demuestra los 25 criterios de aceptaci√≥n solicitados. La simulaci√≥n cubre detecci√≥n, bloqueo UI, persistencia, notificaciones internas y logging. Para un sistema productivo, las recomendaciones incluyen mover la l√≥gica a backend, usar una base de datos para persistencia, y agregar notificaciones por correo y pruebas automatizadas.

Documento generado autom√°ticamente en formato Word. Consulte las secciones de 'Pruebas' y 'Mapeo a Base de Datos' para los pasos de integraci√≥n y QA final.
